<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.bus.dao.RouteDAO">
	<!-- route테이블 -->
	<select id="routeidSearch" parameterType="String" resultType="kr.or.bus.dto.RouteDTO">
		select R_ID from route where R_NUM = #{r_num}
	</select>
	

	<!-- 전체 노선 -->
	<select id="route" resultType="kr.or.bus.dto.RouteDTO">
		select r_num from route
	</select>
	<select id="getRouteNum" resultType = "kr.or.bus.dto.RouteDTO">
		select r_num 
		from route
	</select>
	
	<!-- 노선번호 에 해당하는 정보들 insert-route테이블 -->
	<insert id="routeInsertData" parameterType="kr.or.bus.dto.RouteDTO">
		INSERT INTO route(R_NUM, G_NUM, R_START, R_LAST, R_INTERVAL, R_ID, BD_NUM) VALUES(#{r_num}, '', #{r_start}, #{r_last}, #{r_interval}, #{r_id}, #{bd_num})
	</insert>
	
	<!-- route 정보 중복체크 -->
	<select id="routeDataCheck" parameterType="kr.or.bus.dto.RouteDTO" resultType="Integer">
		select COUNT(*) from route WHERE r_id = #{r_id}
	</select>
	
	<!-- 추가 -->
	<!-- 노선번호에 해당되는 정류장 리스트 가져오기  -->
	<select id="routeRead" parameterType="String" resultType="kr.or.bus.dto.RouteStopCopyJoinStopDTO">
		select cp.r_num,
			cp.s_num,
			cp.st_type,
			cp.rs_order,
			cp.rs_check,
			cp.r_id,
			cp.rs_start,
			cp.rs_end,
			s.s_num,
			s.s_x,
			s.s_y,
			s.s_name
		from routestopcopy cp
		join stop s on cp.s_num=s.s_num
		where cp.r_num=#{r_num}
	</select>
	
	<!-- 노선타입 조회 -->
	<select id="searchRouteType" resultType="kr.or.bus.dto.RouteTypeDTO">
		SELECT BD_NAME FROM BUSDIS
	</select>
	<!-- 입력받은 select 박스 옵션 값 에 따라 일치하는 노선번호 리스트 출력 -->
	<!-- <select id="searchRouteNumber" parameterType="String" resultType="kr.or.bus.dto.RouteTypeDTO">
		select ROUTE.R_NUM 
		FROM BUSDIS, ROUTE
		WHERE ROUTE.BD_NUM = BUSDIS.BD_NUM and BUSDIS.BD_NAME  = #{bd_name}
	</select> -->
	
</mapper>